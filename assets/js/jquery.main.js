function initCycleCarousel(){jQuery(".post-slider").scrollAbsoluteGallery({mask:".mask",slider:".slideset",slides:".slide",btnPrev:"a.btn-prev",btnNext:"a.btn-next",pagerLinks:".pagination li",stretchSlideToMask:!0,pauseOnHover:!0,maskAutoSize:!0,autoRotation:!0,switchTime:3e3,animSpeed:500})}function initSameHeight(){jQuery(".sameheight-block").sameHeight({elements:".sameheight",useMinHeight:!0,flexible:!0,multiLine:!0,biggestHeight:!0})}function initMobileNav(){jQuery("body").mobileNav({hideOnClickOutside:!0,menuActiveClass:"nav-active",menuOpener:".nav-opener",menuDrop:".nav-section"})}function initFitVids(){jQuery("#video-blog").fitVids()}function initLightbox(){jQuery('a.lightbox, a[data-rel*="lightbox"]').each(function(){var t=jQuery(this);t.attr("rel",t.attr("data-rel")).fancybox({padding:0,margin:0,cyclic:!1,autoScale:!0,overlayShow:!0,overlayOpacity:.65,overlayColor:"#000000",titlePosition:"inside",onComplete:function(e){0===t.attr("href").indexOf("#")&&jQuery("#fancybox-content").find("a.close").unbind("click.fb").bind("click.fb",function(t){jQuery.fancybox.close(),t.preventDefault()})}})})}function initValidation(){var t="error",e="success",i=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;jQuery("form.validate-form").each(function(){function n(t){a=!0,h.each(s),a||t.preventDefault()}function s(t,e){var n=jQuery(e),s=n.closest(".field");n.hasClass("required")&&o(s,n,!n.val().length||n.val()===n.prop("defaultValue")),n.hasClass("required-email")&&o(s,n,!i.test(n.val()))}function o(i,n,s){i.removeClass(t).removeClass(e),s?(i.addClass(t),n.one("focus",function(){i.removeClass(t).removeClass(e)}),a=!1):i.addClass(e)}var r=jQuery(this).attr("novalidate","novalidate"),a=!0,h=r.find("input, textarea");r.submit(n)})}jQuery(function(){initCycleCarousel(),initSameHeight(),initFitVids(),initValidation(),initMobileNav(),initLightbox(),jQuery("input, textarea").placeholder()}),function(t){function e(e){this.options=t.extend({activeClass:"active",mask:"div.slides-mask",slider:">ul",slides:">li",btnPrev:".btn-prev",btnNext:".btn-next",pagerLinks:"ul.pager > li",generatePagination:!1,pagerList:"<ul>",pagerListItem:'<li><a href="#"></a></li>',pagerListItemText:"a",galleryReadyClass:"gallery-js-ready",currentNumber:"span.current-num",totalNumber:"span.total-num",maskAutoSize:!1,autoRotation:!1,pauseOnHover:!1,stretchSlideToMask:!1,switchTime:3e3,animSpeed:500,handleTouch:!0,swipeThreshold:15,vertical:!1},e),this.init()}e.prototype={init:function(){this.options.holder&&(this.findElements(),this.attachEvents(),this.makeCallback("onInit",this))},findElements:function(){this.holder=t(this.options.holder).addClass(this.options.galleryReadyClass),this.mask=this.holder.find(this.options.mask),this.slider=this.mask.find(this.options.slider),this.slides=this.slider.find(this.options.slides),this.btnPrev=this.holder.find(this.options.btnPrev),this.btnNext=this.holder.find(this.options.btnNext),this.currentNumber=this.holder.find(this.options.currentNumber),this.totalNumber=this.holder.find(this.options.totalNumber),this.pagerLinks="string"==typeof this.options.generatePagination?this.buildPagination():this.holder.find(this.options.pagerLinks),this.sizeProperty=this.options.vertical?"height":"width",this.positionProperty=this.options.vertical?"top":"left",this.animProperty=this.options.vertical?"marginTop":"marginLeft",this.slideSize=this.slides[this.sizeProperty](),this.currentIndex=0,this.prevIndex=0,this.options.maskAutoSize=this.options.vertical?!1:this.options.maskAutoSize,this.options.vertical&&this.mask.css({height:this.slides.innerHeight()}),this.options.maskAutoSize&&this.mask.css({height:this.slider.height()}),this.slider.css({position:"relative",height:this.options.vertical?this.slideSize*this.slides.length:"100%"}),this.slides.css({position:"absolute"}).css(this.positionProperty,-9999).eq(this.currentIndex).css(this.positionProperty,0),this.refreshState()},buildPagination:function(){var e=t();if(this.pagerHolder||(this.pagerHolder=this.holder.find(this.options.generatePagination)),this.pagerHolder.length){this.pagerHolder.empty(),this.pagerList=t(this.options.pagerList).appendTo(this.pagerHolder);for(var i=0;i<this.slides.length;i++)t(this.options.pagerListItem).appendTo(this.pagerList).find(this.options.pagerListItemText).text(i+1);e=this.pagerList.children()}return e},attachEvents:function(){var e=this;this.btnPrev.length&&(this.btnPrevHandler=function(t){t.preventDefault(),e.prevSlide()},this.btnPrev.click(this.btnPrevHandler)),this.btnNext.length&&(this.btnNextHandler=function(t){t.preventDefault(),e.nextSlide()},this.btnNext.click(this.btnNextHandler)),this.pagerLinks.length&&(this.pagerLinksHandler=function(t){t.preventDefault(),e.numSlide(e.pagerLinks.index(t.currentTarget))},this.pagerLinks.click(this.pagerLinksHandler)),this.options.pauseOnHover&&(this.hoverHandler=function(){clearTimeout(e.timer)},this.leaveHandler=function(){e.autoRotate()},this.holder.bind({mouseenter:this.hoverHandler,mouseleave:this.leaveHandler})),this.resizeHandler=function(){e.animating||(e.options.stretchSlideToMask&&e.resizeSlides(),e.resizeHolder(),e.setSlidesPosition(e.currentIndex))},t(window).bind("load resize orientationchange",this.resizeHandler),e.options.stretchSlideToMask&&e.resizeSlides(),this.options.handleTouch&&window.Hammer&&this.mask.length&&this.slides.length>1&&i&&(this.swipeHandler=new Hammer.Manager(this.mask[0]),this.swipeHandler.add(new Hammer.Pan({direction:e.options.vertical?Hammer.DIRECTION_VERTICAL:Hammer.DIRECTION_HORIZONTAL,threshold:e.options.swipeThreshold})),this.swipeHandler.on("panstart",function(){e.animating?e.swipeHandler.stop():clearTimeout(e.timer)}).on("panmove",function(t){e.swipeOffset=-e.slideSize+t[e.options.vertical?"deltaY":"deltaX"],e.slider.css(e.animProperty,e.swipeOffset),clearTimeout(e.timer)}).on("panend",function(t){if(t.distance>e.options.swipeThreshold)t.offsetDirection===Hammer.DIRECTION_RIGHT||t.offsetDirection===Hammer.DIRECTION_DOWN?e.nextSlide():e.prevSlide();else{var i={};i[e.animProperty]=-e.slideSize,e.slider.animate(i,{duration:e.options.animSpeed}),e.autoRotate()}e.swipeOffset=0})),this.autoRotate(),this.resizeHolder(),this.setSlidesPosition(this.currentIndex)},resizeSlides:function(){this.slideSize=this.mask[this.options.vertical?"height":"width"](),this.slides.css(this.sizeProperty,this.slideSize)},resizeHolder:function(){this.options.maskAutoSize&&this.mask.css({height:this.slides.eq(this.currentIndex).outerHeight(!0)})},prevSlide:function(){!this.animating&&this.slides.length>1&&(this.direction=-1,this.prevIndex=this.currentIndex,this.currentIndex>0?this.currentIndex--:this.currentIndex=this.slides.length-1,this.switchSlide())},nextSlide:function(t){!this.animating&&this.slides.length>1&&(this.direction=1,this.prevIndex=this.currentIndex,this.currentIndex<this.slides.length-1?this.currentIndex++:this.currentIndex=0,this.switchSlide())},numSlide:function(t){!this.animating&&this.currentIndex!==t&&this.slides.length>1&&(this.direction=t>this.currentIndex?1:-1,this.prevIndex=this.currentIndex,this.currentIndex=t,this.switchSlide())},preparePosition:function(){this.setSlidesPosition(this.prevIndex,this.direction<0?this.currentIndex:null,this.direction>0?this.currentIndex:null,this.direction)},setSlidesPosition:function(t,e,i,n){if(this.slides.length>1){var s="number"==typeof e?e:t>0?t-1:this.slides.length-1,o="number"==typeof i?i:t<this.slides.length-1?t+1:0;if(this.slider.css(this.animProperty,this.swipeOffset?this.swipeOffset:-this.slideSize),this.slides.css(this.positionProperty,-9999).eq(t).css(this.positionProperty,this.slideSize),s===o&&"number"==typeof n){var r=n>0?2*this.slideSize:0;this.slides.eq(o).css(this.positionProperty,r)}else this.slides.eq(s).css(this.positionProperty,0),this.slides.eq(o).css(this.positionProperty,2*this.slideSize)}},switchSlide:function(){var t=this,e=(this.slides.eq(this.prevIndex),this.slides.eq(this.currentIndex));this.animating=!0,this.options.maskAutoSize&&this.mask.animate({height:e.outerHeight(!0)},{duration:this.options.animSpeed});var i={};i[this.animProperty]=this.direction>0?2*-this.slideSize:0,this.preparePosition(),this.slider.animate(i,{duration:this.options.animSpeed,complete:function(){t.setSlidesPosition(t.currentIndex),t.animating=!1,t.autoRotate(),t.makeCallback("onChange",t)}}),this.refreshState(),this.makeCallback("onBeforeChange",this)},refreshState:function(t){this.slides.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.pagerLinks.removeClass(this.options.activeClass).eq(this.currentIndex).addClass(this.options.activeClass),this.currentNumber.html(this.currentIndex+1),this.totalNumber.html(this.slides.length),this.holder.toggleClass("not-enough-slides",1===this.slides.length)},autoRotate:function(){var t=this;clearTimeout(this.timer),this.options.autoRotation&&(this.timer=setTimeout(function(){t.nextSlide()},this.options.switchTime))},makeCallback:function(t){if("function"==typeof this.options[t]){var e=Array.prototype.slice.call(arguments);e.shift(),this.options[t].apply(this,e)}},destroy:function(){this.btnPrev.unbind("click",this.btnPrevHandler),this.btnNext.unbind("click",this.btnNextHandler),this.pagerLinks.unbind("click",this.pagerLinksHandler),this.holder.unbind("mouseenter",this.hoverHandler),this.holder.unbind("mouseleave",this.leaveHandler),t(window).unbind("load resize orientationchange",this.resizeHandler),clearTimeout(this.timer),this.swipeHandler&&this.swipeHandler.destroy(),this.holder.removeClass(this.options.galleryReadyClass),this.slider.add(this.slides).removeAttr("style"),"string"==typeof this.options.generatePagination&&this.pagerHolder.empty()}};var i=/Windows Phone/.test(navigator.userAgent)||"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;t.fn.scrollAbsoluteGallery=function(i){return this.each(function(){t(this).data("ScrollAbsoluteGallery",new e(t.extend(i,{holder:this})))})}}(jQuery),function(t){function e(e,o){var r,a=t(),h=0,c=e.eq(0).offset().top;e.each(function(e){var s=t(this);s.offset().top===c?a=a.add(this):(r=i(a),h=Math.max(h,n(a,r,o)),a=s,c=s.offset().top)}),a.length&&(r=i(a),h=Math.max(h,n(a,r,o))),o.biggestHeight&&e.css(o.useMinHeight&&s?"minHeight":"height",h)}function i(e){var i=0;return e.each(function(){i=Math.max(i,t(this).outerHeight())}),i}function n(e,i,n){var o,r="number"==typeof i?i:i.height();return e.removeClass(n.leftEdgeClass).removeClass(n.rightEdgeClass).each(function(e){var a=t(this),h=0,c="border-box"===a.css("boxSizing")||"border-box"===a.css("-moz-box-sizing")||"border-box"===a.css("-webkit-box-sizing");"number"!=typeof i&&a.parents().each(function(){var e=t(this);return i.is(this)?!1:void(h+=e.outerHeight()-e.height())}),o=r-h,o-=c?0:a.outerHeight()-a.height(),o>0&&a.css(n.useMinHeight&&s?"minHeight":"height",o)}),e.filter(":first").addClass(n.leftEdgeClass),e.filter(":last").addClass(n.rightEdgeClass),o}t.fn.sameHeight=function(i){var o=t.extend({skipClass:"same-height-ignore",leftEdgeClass:"same-height-left",rightEdgeClass:"same-height-right",elements:">*",flexible:!1,multiLine:!1,useMinHeight:!1,biggestHeight:!1},i);return this.each(function(){function i(){c.css(o.useMinHeight&&s?"minHeight":"height",""),o.multiLine?e(c,o):n(c,h,o)}var r,a,h=t(this),c=h.find(o.elements).not("."+o.skipClass);if(c.length){i();var l=function(){a||(a=!0,i(),clearTimeout(r),r=setTimeout(function(){i(),setTimeout(function(){a=!1},10)},100))};o.flexible&&t(window).bind("resize orientationchange fontresize",l),t(window).bind("load",l)}})};var s="undefined"!=typeof document.documentElement.style.maxHeight}(jQuery),jQuery.onFontResize=function(t){return t(function(){var e="font-resize-frame-"+Math.floor(1e3*Math.random()),i=t("<iframe>").attr("id",e).addClass("font-resize-helper");if(i.css({width:"100em",height:"10px",position:"absolute",borderWidth:0,top:"-9999px",left:"-9999px"}).appendTo("body"),window.attachEvent&&!window.addEventListener)i.bind("resize",function(){t.onFontResize.trigger(i[0].offsetWidth/100)});else{var n=i[0].contentWindow.document;n.open(),n.write('<script>window.onload = function(){var em = parent.jQuery("#'+e+'")[0];window.onresize = function(){if(parent.jQuery.onFontResize){parent.jQuery.onFontResize.trigger(em.offsetWidth / 100);}}};</script>'),n.close()}jQuery.onFontResize.initialSize=i[0].offsetWidth/100}),{trigger:function(e){t(window).trigger("fontresize",[e])}}}(jQuery),function(t,e,i){function n(t){var e={},n=/^jQuery\d+$/;return i.each(t.attributes,function(t,i){i.specified&&!n.test(i.name)&&(e[i.name]=i.value)}),e}function s(t,e){var n=this,s=i(n);if(n.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){if(s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id")),t===!0)return s[0].value=e;s.focus()}else n.value="",s.removeClass("placeholder"),n==r()&&n.select()}function o(){var t,e=this,o=i(e),r=this.id;if(""==e.value){if("password"==e.type){if(!o.data("placeholder-textinput")){try{t=o.clone().attr({type:"text"})}catch(a){t=i("<input>").attr(i.extend(n(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":o,"placeholder-id":r}).bind("focus.placeholder",s),o.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}o=o.removeAttr("id").hide().prev().attr("id",r).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function r(){try{return e.activeElement}catch(t){}}var a,h,c="[object OperaMini]"==Object.prototype.toString.call(t.operamini),l="placeholder"in e.createElement("input")&&!c,d="placeholder"in e.createElement("textarea")&&!c,u=i.fn,p=i.valHooks,f=i.propHooks;l&&d?(h=u.placeholder=function(){return this},h.input=h.textarea=!0):(h=u.placeholder=function(){var t=this;return t.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":s,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),t},h.input=l,h.textarea=d,a={get:function(t){var e=i(t),n=e.data("placeholder-password");return n?n[0].value:e.data("placeholder-enabled")&&e.hasClass("placeholder")?"":t.value},set:function(t,e){var n=i(t),a=n.data("placeholder-password");return a?a[0].value=e:n.data("placeholder-enabled")?(""==e?(t.value=e,t!=r()&&o.call(t)):n.hasClass("placeholder")?s.call(t,!0,e)||(t.value=e):t.value=e,n):t.value=e}},l||(p.input=a,f.value=a),d||(p.textarea=a,f.value=a),i(function(){i(e).delegate("form","submit.placeholder",function(){var t=i(".placeholder",this).each(s);setTimeout(function(){t.each(o)},10)})}),i(t).bind("beforeunload.placeholder",function(){i(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),Object.create&&!function(t,e,i,n){"use strict";function s(t,e,i){return setTimeout(l(t,i),e)}function o(t,e,i){return Array.isArray(t)?(r(t,i[e],i),!0):!1}function r(t,e,i){var s;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==n)for(s=0;s<t.length;)e.call(i,t[s],s,t),s++;else for(s in t)t.hasOwnProperty(s)&&e.call(i,t[s],s,t)}function a(t,e,i){for(var s=Object.keys(e),o=0;o<s.length;)(!i||i&&t[s[o]]===n)&&(t[s[o]]=e[s[o]]),o++;return t}function h(t,e){return a(t,e,!0)}function c(t,e,i){var n,s=e.prototype;n=t.prototype=Object.create(s),n.constructor=t,n._super=s,i&&a(n,i)}function l(t,e){return function(){return t.apply(e,arguments)}}function d(t,e){return typeof t==lt?t.apply(e?e[0]||n:n,e):t}function u(t,e){return t===n?e:t}function p(t,e,i){r(v(e),function(e){t.addEventListener(e,i,!1)})}function f(t,e,i){r(v(e),function(e){t.removeEventListener(e,i,!1)})}function g(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function y(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0;n<t.length;){if(i&&t[n][i]==e||!i&&t[n]===e)return n;n++}return-1}function b(t){return Array.prototype.slice.call(t,0)}function w(t,e,i){for(var n=[],s=[],o=0;o<t.length;){var r=e?t[o][e]:t[o];y(s,r)<0&&n.push(t[o]),s[o]=r,o++}return i&&(n=e?n.sort(function(t,i){return t[e]>i[e]}):n.sort()),n}function x(t,e){for(var i,s,o=e[0].toUpperCase()+e.slice(1),r=0;r<ht.length;){if(i=ht[r],s=i?i+o:e,s in t)return s;r++}return n}function T(){return ft++}function C(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function I(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){d(t.options.enable,[t])&&i.handler(e)},this.init()}function E(t){var e,i=t.options.inputClass;return new(e=i?i:vt?_:yt?q:mt?X:R)(t,S)}function S(t,e,i){var n=i.pointers.length,s=i.changedPointers.length,o=e&It&&n-s===0,r=e&(St|kt)&&n-s===0;i.isFirst=!!o,i.isFinal=!!r,o&&(t.session={}),i.eventType=e,k(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function k(t,e){var i=t.session,n=e.pointers,s=n.length;i.firstInput||(i.firstInput=O(e)),s>1&&!i.firstMultiple?i.firstMultiple=O(e):1===s&&(i.firstMultiple=!1);var o=i.firstInput,r=i.firstMultiple,a=r?r.center:o.center,h=e.center=z(n);e.timeStamp=pt(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=D(a,h),e.distance=j(a,h),A(i,e),e.offsetDirection=P(e.deltaX,e.deltaY),e.scale=r?M(r.pointers,n):1,e.rotation=r?L(r.pointers,n):0,H(i,e);var c=t.element;g(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function A(t,e){var i=e.center,n=t.offsetDelta||{},s=t.prevDelta||{},o=t.prevInput||{};(e.eventType===It||o.eventType===St)&&(s=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=s.x+(i.x-n.x),e.deltaY=s.y+(i.y-n.y)}function H(t,e){var i,s,o,r,a=t.lastInterval||e,h=e.timeStamp-a.timeStamp;if(e.eventType!=kt&&(h>Ct||a.velocity===n)){var c=a.deltaX-e.deltaX,l=a.deltaY-e.deltaY,d=N(h,c,l);s=d.x,o=d.y,i=ut(d.x)>ut(d.y)?d.x:d.y,r=P(c,l),t.lastInterval=e}else i=a.velocity,s=a.velocityX,o=a.velocityY,r=a.direction;e.velocity=i,e.velocityX=s,e.velocityY=o,e.direction=r}function O(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:dt(t.pointers[i].clientX),clientY:dt(t.pointers[i].clientY)},i++;return{timeStamp:pt(),pointers:e,center:z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function z(t){var e=t.length;if(1===e)return{x:dt(t[0].clientX),y:dt(t[0].clientY)};for(var i=0,n=0,s=0;e>s;)i+=t[s].clientX,n+=t[s].clientY,s++;return{x:dt(i/e),y:dt(n/e)}}function N(t,e,i){return{x:e/t||0,y:i/t||0}}function P(t,e){return t===e?At:ut(t)>=ut(e)?t>0?Ht:Ot:e>0?zt:Nt}function j(t,e,i){i||(i=Lt);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return Math.sqrt(n*n+s*s)}function D(t,e,i){i||(i=Lt);var n=e[i[0]]-t[i[0]],s=e[i[1]]-t[i[1]];return 180*Math.atan2(s,n)/Math.PI}function L(t,e){return D(e[1],e[0],Mt)-D(t[1],t[0],Mt)}function M(t,e){return j(e[0],e[1],Mt)/j(t[0],t[1],Mt)}function R(){this.evEl=_t,this.evWin=Ft,this.allow=!0,this.pressed=!1,I.apply(this,arguments)}function _(){this.evEl=Wt,this.evWin=Xt,I.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=Bt,this.evWin=Vt,this.started=!1,I.apply(this,arguments)}function Q(t,e){var i=b(t.touches),n=b(t.changedTouches);return e&(St|kt)&&(i=w(i.concat(n),"identifier",!0)),[i,n]}function q(){this.evTarget=Ut,this.targetIds={},I.apply(this,arguments)}function W(t,e){var i=b(t.touches),n=this.targetIds;if(e&(It|Et)&&1===i.length)return n[i[0].identifier]=!0,[i,i];var s,o,r=b(t.changedTouches),a=[],h=this.target;if(o=i.filter(function(t){return g(t.target,h)}),e===It)for(s=0;s<o.length;)n[o[s].identifier]=!0,s++;for(s=0;s<r.length;)n[r[s].identifier]&&a.push(r[s]),e&(St|kt)&&delete n[r[s].identifier],s++;return a.length?[w(o.concat(a),"identifier",!0),a]:void 0}function X(){I.apply(this,arguments);var t=l(this.handler,this);this.touch=new q(this.manager,t),this.mouse=new R(this.manager,t)}function Y(t,e){this.manager=t,this.set(e)}function B(t){if(m(t,ee))return ee;var e=m(t,ie),i=m(t,ne);return e&&i?ie+" "+ne:e||i?e?ie:ne:m(t,te)?te:Jt}function V(t){this.id=T(),this.manager=null,this.options=h(t||{},this.defaults),this.options.enable=u(this.options.enable,!0),this.state=se,this.simultaneous={},this.requireFail=[]}function G(t){return t&ce?"cancel":t&ae?"end":t&re?"move":t&oe?"start":""}function U(t){return t==Nt?"down":t==zt?"up":t==Ht?"left":t==Ot?"right":""}function Z(t,e){var i=e.manager;return i?i.get(t):t}function $(){V.apply(this,arguments)}function K(){$.apply(this,arguments),this.pX=null,this.pY=null}function J(){$.apply(this,arguments)}function tt(){V.apply(this,arguments),this._timer=null,this._input=null}function et(){$.apply(this,arguments)}function it(){$.apply(this,arguments)}function nt(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function st(t,e){return e=e||{},e.recognizers=u(e.recognizers,st.defaults.preset),new ot(t,e)}function ot(t,e){e=e||{},this.options=h(e,st.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=E(this),this.touchAction=new Y(this,this.options.touchAction),rt(this,!0),r(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function rt(t,e){var i=t.element;r(t.options.cssProps,function(t,n){i.style[x(i.style,n)]=e?t:""})}function at(t,i){var n=e.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=i,i.target.dispatchEvent(n)}var ht=["","webkit","moz","MS","ms","o"],ct=e.createElement("div"),lt="function",dt=Math.round,ut=Math.abs,pt=Date.now,ft=1,gt=/mobile|tablet|ip(ad|hone|od)|android/i,mt="ontouchstart"in t,vt=x(t,"PointerEvent")!==n,yt=mt&&gt.test(navigator.userAgent),bt="touch",wt="pen",xt="mouse",Tt="kinect",Ct=25,It=1,Et=2,St=4,kt=8,At=1,Ht=2,Ot=4,zt=8,Nt=16,Pt=Ht|Ot,jt=zt|Nt,Dt=Pt|jt,Lt=["x","y"],Mt=["clientX","clientY"];I.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(C(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(C(this.element),this.evWin,this.domHandler)}};var Rt={mousedown:It,mousemove:Et,mouseup:St},_t="mousedown",Ft="mousemove mouseup";c(R,I,{handler:function(t){var e=Rt[t.type];e&It&&0===t.button&&(this.pressed=!0),e&Et&&1!==t.which&&(e=St),this.pressed&&this.allow&&(e&St&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:xt,srcEvent:t}))}});var Qt={pointerdown:It,pointermove:Et,pointerup:St,pointercancel:kt,pointerout:kt},qt={2:bt,3:wt,4:xt,5:Tt},Wt="pointerdown",Xt="pointermove pointerup pointercancel";t.MSPointerEvent&&(Wt="MSPointerDown",Xt="MSPointerMove MSPointerUp MSPointerCancel"),c(_,I,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),s=Qt[n],o=qt[t.pointerType]||t.pointerType,r=o==bt,a=y(e,t.pointerId,"pointerId");s&It&&(0===t.button||r)?0>a&&(e.push(t),a=e.length-1):s&(St|kt)&&(i=!0),0>a||(e[a]=t,this.callback(this.manager,s,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),i&&e.splice(a,1))}});var Yt={touchstart:It,touchmove:Et,touchend:St,touchcancel:kt},Bt="touchstart",Vt="touchstart touchmove touchend touchcancel";c(F,I,{handler:function(t){var e=Yt[t.type];if(e===It&&(this.started=!0),this.started){var i=Q.call(this,t,e);e&(St|kt)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}});var Gt={touchstart:It,touchmove:Et,touchend:St,touchcancel:kt},Ut="touchstart touchmove touchend touchcancel";c(q,I,{handler:function(t){var e=Gt[t.type],i=W.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:bt,srcEvent:t})}}),c(X,I,{handler:function(t,e,i){var n=i.pointerType==bt,s=i.pointerType==xt;if(n)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;e&(St|kt)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Zt=x(ct.style,"touchAction"),$t=Zt!==n,Kt="compute",Jt="auto",te="manipulation",ee="none",ie="pan-x",ne="pan-y";Y.prototype={set:function(t){t==Kt&&(t=this.compute()),$t&&(this.manager.element.style[Zt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){d(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),B(t.join(" "))},preventDefaults:function(t){if(!$t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,s=m(n,ee),o=m(n,ne),r=m(n,ie);return s||o&&i&Pt||r&&i&jt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var se=1,oe=2,re=4,ae=8,he=ae,ce=16,le=32;V.prototype={defaults:{},set:function(t){return a(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=Z(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=Z(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=Z(t,this),-1===y(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=Z(t,this);var e=y(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){i.manager.emit(i.options.event+(e?G(n):""),t)}var i=this,n=this.state;ae>n&&e(!0),e(),n>=ae&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=le)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(le|se)))return!1;t++}return!0},recognize:function(t){var e=a({},t);return d(this.options.enable,[this,e])?(this.state&(he|ce|le)&&(this.state=se),this.state=this.process(e),void(this.state&(oe|re|ae|ce)&&this.tryEmit(e))):(this.reset(),void(this.state=le))},process:function(){},getTouchAction:function(){},reset:function(){}},c($,V,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(oe|re),s=this.attrTest(t);return n&&(i&kt||!s)?e|ce:n||s?i&St?e|ae:e&oe?e|re:oe:le}}),c(K,$,{defaults:{event:"pan",threshold:10,pointers:1,direction:Dt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Pt&&e.push(ne),t&jt&&e.push(ie),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,s=t.direction,o=t.deltaX,r=t.deltaY;return s&e.direction||(e.direction&Pt?(s=0===o?At:0>o?Ht:Ot,i=o!=this.pX,n=Math.abs(t.deltaX)):(s=0===r?At:0>r?zt:Nt,i=r!=this.pY,n=Math.abs(t.deltaY))),t.direction=s,i&&n>e.threshold&&s&e.direction},attrTest:function(t){return $.prototype.attrTest.call(this,t)&&(this.state&oe||!(this.state&oe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=U(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),c(J,$,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oe)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),c(tt,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Jt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!n||!i||t.eventType&(St|kt)&&!o)this.reset();else if(t.eventType&It)this.reset(),this._timer=s(function(){this.state=he,this.tryEmit()},e.time,this);else if(t.eventType&St)return he;return le},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===he&&(t&&t.eventType&St?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=pt(),this.manager.emit(this.options.event,this._input)))}}),c(et,$,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oe)}}),c(it,$,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:Pt|jt,pointers:1},getTouchAction:function(){return K.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(Pt|jt)?e=t.velocity:i&Pt?e=t.velocityX:i&jt&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&t.distance>this.options.threshold&&ut(e)>this.options.velocity&&t.eventType&St},emit:function(t){var e=U(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(nt,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[te]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,n=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&It&&0===this.count)return this.failTimeout();if(n&&o&&i){if(t.eventType!=St)return this.failTimeout();var r=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||j(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t;var h=this.count%e.taps;if(0===h)return this.hasRequireFailures()?(this._timer=s(function(){this.state=he,this.tryEmit()},e.interval,this),oe):he}return le},failTimeout:function(){return this._timer=s(function(){this.state=le},this.options.interval,this),le},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==he&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),st.VERSION="2.0.4",st.defaults={domEvents:!1,touchAction:Kt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[J,{enable:!1},["rotate"]],[it,{direction:Pt}],[K,{direction:Pt},["swipe"]],[nt],[nt,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var de=1,ue=2;ot.prototype={set:function(t){return a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?ue:de},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var i,n=this.recognizers,s=e.curRecognizer;(!s||s&&s.state&he)&&(s=e.curRecognizer=null);for(var o=0;o<n.length;)i=n[o],e.stopped===ue||s&&i!=s&&!i.canRecognizeWith(s)?i.reset():i.recognize(t),!s&&i.state&(oe|re|ae)&&(s=e.curRecognizer=i),o++}},get:function(t){if(t instanceof V)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(y(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return r(v(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return r(v(t),function(t){e?i[t].splice(y(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&at(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){
e.srcEvent.preventDefault()};for(var n=0;n<i.length;)i[n](e),n++}},destroy:function(){this.element&&rt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(st,{INPUT_START:It,INPUT_MOVE:Et,INPUT_END:St,INPUT_CANCEL:kt,STATE_POSSIBLE:se,STATE_BEGAN:oe,STATE_CHANGED:re,STATE_ENDED:ae,STATE_RECOGNIZED:he,STATE_CANCELLED:ce,STATE_FAILED:le,DIRECTION_NONE:At,DIRECTION_LEFT:Ht,DIRECTION_RIGHT:Ot,DIRECTION_UP:zt,DIRECTION_DOWN:Nt,DIRECTION_HORIZONTAL:Pt,DIRECTION_VERTICAL:jt,DIRECTION_ALL:Dt,Manager:ot,Input:I,TouchAction:Y,TouchInput:q,MouseInput:R,PointerEventInput:_,TouchMouseInput:X,SingleTouchInput:F,Recognizer:V,AttrRecognizer:$,Tap:nt,Pan:K,Swipe:it,Pinch:J,Rotate:et,Press:tt,on:p,off:f,each:r,merge:h,extend:a,inherit:c,bindFn:l,prefixed:x}),typeof define==lt&&define.amd?define(function(){return st}):"undefined"!=typeof module&&module.exports?module.exports=st:t[i]=st}(window,document,"Hammer"),function(t){t.fn.fitVids=function(e){var i={customSelector:null};if(!document.getElementById("fit-vids-style")){var n=document.createElement("div"),s=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],o="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";n.className="fit-vids-style",n.id="fit-vids-style",n.style.display="none",n.innerHTML=o,s.parentNode.insertBefore(n,s)}return e&&t.extend(i,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];i.customSelector&&e.push(i.customSelector);var n=t(this).find(e.join(","));n=n.not("object object"),n.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),n=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),s=i/n;if(!e.attr("id")){var o="fitvid"+Math.floor(999999*Math.random());e.attr("id",o)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*s+"%"),e.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),window.matchMedia=window.matchMedia||function(t,e){var i,n=t.documentElement,s=n.firstElementChild||n.firstChild,o=t.createElement("body"),r=t.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",o.appendChild(r),function(t){return r.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(o,s),i=42==r.offsetWidth,n.removeChild(o),{matches:i,media:t}}}(document),function(t){t.picturefill=function(){for(var e=t.document.getElementsByTagName("span"),i=0,n=e.length;n>i;i++)if(null!==e[i].getAttribute("data-picture")){for(var s=e[i].getElementsByTagName("span"),o=[],r=0,a=s.length;a>r;r++){var h=s[r].getAttribute("data-media");(!h||t.matchMedia&&t.matchMedia(h).matches)&&o.push(s[r])}var c=e[i].getElementsByTagName("img")[0];if(o.length){var l=o.pop();c&&"NOSCRIPT"!==c.parentNode.nodeName||(c=t.document.createElement("img"),c.alt=e[i].getAttribute("data-alt")),l.getAttribute("data-width")?c.setAttribute("width",l.getAttribute("data-width")):c.removeAttribute("width"),l.getAttribute("data-height")?c.setAttribute("height",l.getAttribute("data-height")):c.removeAttribute("height"),c.src=l.getAttribute("data-src"),l.appendChild(c)}else c&&c.parentNode.removeChild(c)}},t.addEventListener?(t.addEventListener("resize",t.picturefill,!1),t.addEventListener("DOMContentLoaded",function(){t.picturefill(),t.removeEventListener("load",t.picturefill,!1)},!1),t.addEventListener("load",t.picturefill,!1)):t.attachEvent&&t.attachEvent("onload",t.picturefill)}(this),function(t){function e(e){this.options=t.extend({container:null,hideOnClickOutside:!1,menuActiveClass:"nav-active",menuOpener:".nav-opener",menuDrop:".nav-drop",toggleEvent:"click",outsideClickEvent:"click touchstart pointerdown MSPointerDown"},e),this.initStructure(),this.attachEvents()}e.prototype={initStructure:function(){this.page=t("html"),this.container=t(this.options.container),this.opener=this.container.find(this.options.menuOpener),this.drop=this.container.find(this.options.menuDrop)},attachEvents:function(){var e=this;i&&(i(),i=null),this.outsideClickHandler=function(i){if(e.isOpened()){var n=t(i.target);n.closest(e.opener).length||n.closest(e.drop).length||e.hide()}},this.openerClickHandler=function(t){t.preventDefault(),e.toggle()},this.opener.on(this.options.toggleEvent,this.openerClickHandler)},isOpened:function(){return this.container.hasClass(this.options.menuActiveClass)},show:function(){this.container.addClass(this.options.menuActiveClass),this.options.hideOnClickOutside&&this.page.on(this.options.outsideClickEvent,this.outsideClickHandler)},hide:function(){this.container.removeClass(this.options.menuActiveClass),this.options.hideOnClickOutside&&this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)},toggle:function(){this.isOpened()?this.hide():this.show()},destroy:function(){this.container.removeClass(this.options.menuActiveClass),this.opener.off(this.options.toggleEvent,this.clickHandler),this.page.off(this.options.outsideClickEvent,this.outsideClickHandler)}};var i=function(){var e,i,n=t(window),s=t("html"),o="resize-active",r=function(){e=!1,s.removeClass(o)},a=function(){e||(e=!0,s.addClass(o)),clearTimeout(i),i=setTimeout(r,500)};n.on("resize orientationchange",a)};t.fn.mobileNav=function(i){return this.each(function(){var n=t.extend({},i,{container:this}),s=new e(n);t.data(this,"MobileNav",s)})}}(jQuery),jQuery(function(){var t="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,e=/Windows Phone/.test(navigator.userAgent),i=jQuery("<style>").appendTo("head");styleSheet=i.prop("sheet")||i.prop("styleSheet");var n=function(t,e,i){styleSheet.insertRule?styleSheet.insertRule(t+"{"+e+"}",i):styleSheet.addRule(t,e,i)};t||e?setTimeout(function(){var t=jQuery("body"),e=jQuery("#fancybox-bg-ne, #fancybox-bg-e, #fancybox-bg-se"),i=jQuery("#fancybox-overlay"),n=jQuery("#fancybox-wrap");jQuery.fancybox.center=function(){n.innerWidth()>i.innerWidth()?(n.css({padding:0}),e.css({display:"none"})):(n.css({padding:""}),e.css({display:""})),n.css({left:(t.innerWidth()-n.innerWidth())/2})},jQuery(window).on("resize orientationchange",function(){jQuery.fancybox.center()})},1):n("#fancybox-overlay","position:fixed;top:0;left:0")}),function(t){var e,i,n,s,o,r,a,h,c,l,d,u,p,f=0,g={},m=[],v=0,y={},b=[],w=null,x=new Image,T=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,C=/[^\.]\.(swf)\s*$/i,I=1,E=0,S="",k=!1,A=t.extend(t("<div/>")[0],{prop:0}),H=/MSIE 6/.test(navigator.userAgent)&&t.browser.version<7&&!window.XMLHttpRequest,O=function(){i.hide(),x.onerror=x.onload=null,w&&w.abort(),e.empty()},z=function(){return!1===g.onError(m,f,g)?(i.hide(),void(k=!1)):(g.titleShow=!1,g.width="auto",g.height="auto",e.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),void P())},N=function(){var n,s,o,a,h,c,l=m[f];if(O(),g=t.extend({},t.fn.fancybox.defaults,"undefined"==typeof t(l).data("fancybox")?g:t(l).data("fancybox")),c=g.onStart(m,f,g),c===!1)return void(k=!1);if("object"==typeof c&&(g=t.extend(g,c)),o=g.title||(l.nodeName?t(l).attr("title"):l.title)||"",l.nodeName&&!g.orig&&(g.orig=t(l).children("img:first").length?t(l).children("img:first"):t(l)),""===o&&g.orig&&g.titleFromAlt&&(o=g.orig.attr("alt")),n=g.href||(l.nodeName?t(l).attr("href"):l.href)||null,(/^(?:javascript)/i.test(n)||"#"==n)&&(n=null),g.type?(s=g.type,n||(n=g.content)):g.content?s="html":n&&(s=n.match(T)?"image":n.match(C)?"swf":t(l).hasClass("iframe")?"iframe":0===n.indexOf("#")?"inline":"ajax"),!s)return void z();switch("inline"==s&&(l=n.substr(n.indexOf("#")),s=t(l).length>0?"inline":"ajax"),g.type=s,g.href=n,g.title=o,g.autoDimensions&&("html"==g.type||"inline"==g.type||"ajax"==g.type?(g.width="auto",g.height="auto"):g.autoDimensions=!1),g.modal&&(g.overlayShow=!0,g.hideOnOverlayClick=!1,g.hideOnContentClick=!1,g.enableEscapeButton=!1,g.showCloseButton=!1),g.padding=parseInt(g.padding,10),g.margin=parseInt(g.margin,10),e.css("padding",g.padding+g.margin),t(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){t(this).replaceWith(r.children())}),s){case"html":e.html(g.content),P();break;case"inline":if(t(l).parent().is("#fancybox-content")===!0)return void(k=!1);t('<div class="fancybox-inline-tmp" />').hide().insertBefore(t(l)).bind("fancybox-cleanup",function(){t(this).replaceWith(r.children())}).bind("fancybox-cancel",function(){t(this).replaceWith(e.children())}),t(l).appendTo(e),P();break;case"image":k=!1,t.fancybox.showActivity(),x=new Image,x.onerror=function(){z()},x.onload=function(){k=!0,x.onerror=x.onload=null,j()},x.src=n;break;case"swf":g.scrolling="no",a='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+g.width+'" height="'+g.height+'"><param name="movie" value="'+n+'"></param>',h="",t.each(g.swf,function(t,e){a+='<param name="'+t+'" value="'+e+'"></param>',h+=" "+t+'="'+e+'"'}),a+='<embed src="'+n+'" type="application/x-shockwave-flash" width="'+g.width+'" height="'+g.height+'"'+h+"></embed></object>",e.html(a),P();break;case"ajax":k=!1,t.fancybox.showActivity(),g.ajax.win=g.ajax.success,w=t.ajax(t.extend({},g.ajax,{url:n,data:g.ajax.data||{},dataType:"text",error:function(t,e,i){t.status>0&&z()},success:function(t,s,o){var r="object"==typeof o?o:w;if(200==r.status||0===r.status){if("function"==typeof g.ajax.win){if(c=g.ajax.win(n,t,s,o),c===!1)return void i.hide();("string"==typeof c||"object"==typeof c)&&(t=c)}e.html(t),P()}}}));break;case"iframe":D()}},P=function(){var i=g.width,n=g.height;i=i.toString().indexOf("%")>-1?parseInt((t(window).width()-2*g.margin)*parseFloat(i)/100,10)+"px":"auto"==i?"auto":i+"px",n=n.toString().indexOf("%")>-1?parseInt((t(window).height()-2*g.margin)*parseFloat(n)/100,10)+"px":"auto"==n?"auto":n+"px",e.wrapInner('<div style="width:'+i+";height:"+n+";overflow: "+("auto"==g.scrolling?"auto":"yes"==g.scrolling?"scroll":"hidden")+';position:relative;"></div>'),g.width=e.width(),g.height=e.height(),D()},j=function(){g.width=x.width,g.height=x.height,t("<img />").attr({id:"fancybox-img",src:x.src,alt:g.title}).appendTo(e),D()},D=function(){var o,d;return i.hide(),s.is(":visible")&&!1===y.onCleanup(b,v,y)?(t(".fancybox-inline-tmp").trigger("fancybox-cancel"),void(k=!1)):(k=!0,t(r.add(n)).unbind(),t(window).unbind("resize.fb scroll.fb"),t(document).unbind("keydown.fb"),s.is(":visible")&&"outside"!==y.titlePosition&&s.css("height",s.height()),b=m,v=f,y=g,y.overlayShow?(n.css({"background-color":y.overlayColor,opacity:y.overlayOpacity,cursor:y.hideOnOverlayClick?"pointer":"auto",height:t(document).height()}),n.is(":visible")||(H&&t("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),n.show())):n.hide(),p=W(),M(),s.is(":visible")?(t(a.add(c).add(l)).hide(),o=s.position(),u={top:o.top,left:o.left,width:s.width(),height:s.height()},d=u.width==p.width&&u.height==p.height,void r.fadeTo(y.changeFade,.3,function(){var i=function(){r.html(e.contents()).fadeTo(y.changeFade,1,_)};t(".fancybox-inline-tmp").trigger("fancybox-change"),r.empty().removeAttr("filter").css({"border-width":y.padding,width:p.width-2*y.padding,height:g.autoDimensions?"auto":p.height-E-2*y.padding}),d?i():(A.prop=0,t(A).animate({prop:1},{duration:y.changeSpeed,easing:y.easingChange,step:Q,complete:i}))})):(s.removeAttr("style"),r.css("border-width",y.padding),"elastic"==y.transitionIn?(u=Y(),r.html(e.contents()),s.show(),y.opacity&&(p.opacity=0),A.prop=0,void t(A).animate({prop:1},{duration:y.speedIn,easing:y.easingIn,step:Q,complete:_})):("inside"==y.titlePosition&&E>0&&h.show(),r.css({width:p.width-2*y.padding,height:g.autoDimensions?"auto":p.height-E-2*y.padding}).html(e.contents()),void s.css(p).fadeIn("none"==y.transitionIn?0:y.speedIn,_))))},L=function(t){return t&&t.length?"float"==y.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+y.titlePosition+'">'+t+"</div>":!1},M=function(){if(S=y.title||"",E=0,h.empty().removeAttr("style").removeClass(),y.titleShow===!1)return void h.hide();if(S=t.isFunction(y.titleFormat)?y.titleFormat(S,b,v,y):L(S),!S||""===S)return void h.hide();switch(h.addClass("fancybox-title-"+y.titlePosition).html(S).appendTo("body").show(),y.titlePosition){case"inside":h.css({width:p.width-2*y.padding,marginLeft:y.padding,marginRight:y.padding}),E=h.outerHeight(!0),h.appendTo(o),p.height+=E;break;case"over":h.css({marginLeft:y.padding,width:p.width-2*y.padding,bottom:y.padding}).appendTo(o);break;case"float":h.css("left",-1*parseInt((h.width()-p.width-40)/2,10)).appendTo(s);break;default:h.css({width:p.width-2*y.padding,paddingLeft:y.padding,paddingRight:y.padding}).appendTo(s)}h.hide()},R=function(){return(y.enableEscapeButton||y.enableKeyboardNav)&&t(document).bind("keydown.fb",function(e){27==e.keyCode&&y.enableEscapeButton?(e.preventDefault(),t.fancybox.close()):37!=e.keyCode&&39!=e.keyCode||!y.enableKeyboardNav||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName||"SELECT"===e.target.tagName||(e.preventDefault(),t.fancybox[37==e.keyCode?"prev":"next"]())}),y.showNavArrows?((y.cyclic&&b.length>1||0!==v)&&c.show(),void((y.cyclic&&b.length>1||v!=b.length-1)&&l.show())):(c.hide(),void l.hide())},_=function(){t.support.opacity===!1&&(r.get(0).style.removeAttribute("filter"),s.get(0).style.removeAttribute("filter")),g.autoDimensions&&r.css("height","auto"),s.css("height","auto"),S&&S.length&&h.show(),y.showCloseButton&&a.show(),R(),y.hideOnContentClick&&r.bind("click",t.fancybox.close),y.hideOnOverlayClick&&n.bind("click",t.fancybox.close),t(window).bind("resize.fb",t.fancybox.resize),y.centerOnScroll&&t(window).bind("scroll.fb",t.fancybox.center),"iframe"==y.type&&t('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(window.attachEvent?'allowtransparency="true""':"")+' scrolling="'+g.scrolling+'" src="'+y.href+'"></iframe>').appendTo(r),s.show(),k=!1,t.fancybox.center(),y.onComplete(b,v,y),F()},F=function(){var t,e;b.length-1>v&&(t=b[v+1].href,"undefined"!=typeof t&&t.match(T)&&(e=new Image,e.src=t)),v>0&&(t=b[v-1].href,"undefined"!=typeof t&&t.match(T)&&(e=new Image,e.src=t))},Q=function(t){var e={width:parseInt(u.width+(p.width-u.width)*t,10),height:parseInt(u.height+(p.height-u.height)*t,10),top:parseInt(u.top+(p.top-u.top)*t,10),left:parseInt(u.left+(p.left-u.left)*t,10)};"undefined"!=typeof p.opacity&&(e.opacity=.5>t?.5:t),s.css(e),r.css({width:e.width-2*y.padding,height:e.height-E*t-2*y.padding})},q=function(){return[t(window).width()-2*y.margin,t(window).height()-2*y.margin,t(document).scrollLeft()+y.margin,t(document).scrollTop()+y.margin]},W=function(){var t,e=q(),i={},n=y.autoScale,s=2*y.padding;return i.width=y.width.toString().indexOf("%")>-1?parseInt(e[0]*parseFloat(y.width)/100,10):y.width+s,i.height=y.height.toString().indexOf("%")>-1?parseInt(e[1]*parseFloat(y.height)/100,10):y.height+s,n&&(i.width>e[0]||i.height>e[1])&&("image"==g.type||"swf"==g.type?(t=y.width/y.height,i.width>e[0]&&(i.width=e[0],i.height=parseInt((i.width-s)/t+s,10)),i.height>e[1]&&(i.height=e[1],i.width=parseInt((i.height-s)*t+s,10))):(i.width=Math.min(i.width,e[0]),i.height=Math.min(i.height,e[1]))),i.top=parseInt(Math.max(e[3]-20,e[3]+.5*(e[1]-i.height-40)),10),i.left=parseInt(Math.max(e[2]-20,e[2]+.5*(e[0]-i.width-40)),10),i},X=function(t){var e=t.offset();return e.top+=parseInt(t.css("paddingTop"),10)||0,e.left+=parseInt(t.css("paddingLeft"),10)||0,e.top+=parseInt(t.css("border-top-width"),10)||0,e.left+=parseInt(t.css("border-left-width"),10)||0,e.width=t.width(),e.height=t.height(),e},Y=function(){var e,i,n=g.orig?t(g.orig):!1,s={};return n&&n.length?(e=X(n),s={width:e.width+2*y.padding,height:e.height+2*y.padding,top:e.top-y.padding-20,left:e.left-y.padding-20}):(i=q(),s={width:2*y.padding,height:2*y.padding,top:parseInt(i[3]+.5*i[1],10),left:parseInt(i[2]+.5*i[0],10)}),s},B=function(){return i.is(":visible")?(t("div",i).css("top",-40*I+"px"),void(I=(I+1)%12)):void clearInterval(d)};t.fn.fancybox=function(e){return t(this).length?(t(this).data("fancybox",t.extend({},e,t.metadata?t(this).metadata():{})).unbind("click.fb").bind("click.fb",function(e){if(e.preventDefault(),!k){k=!0,t(this).blur(),m=[],f=0;var i=t(this).attr("rel")||"";i&&""!=i&&"nofollow"!==i?(m=t('a[rel="'+i+'"], area[rel="'+i+'"]'),f=m.index(this)):m.push(this),N()}}),this):this},t.fancybox=function(e){var i;if(!k){if(k=!0,i="undefined"!=typeof arguments[1]?arguments[1]:{},m=[],f=parseInt(i.index,10)||0,t.isArray(e)){for(var n=0,s=e.length;s>n;n++)"object"==typeof e[n]?t(e[n]).data("fancybox",t.extend({},i,e[n])):e[n]=t({}).data("fancybox",t.extend({content:e[n]},i));m=jQuery.merge(m,e)}else"object"==typeof e?t(e).data("fancybox",t.extend({},i,e)):e=t({}).data("fancybox",t.extend({content:e},i)),m.push(e);(f>m.length||0>f)&&(f=0),N()}},t.fancybox.showActivity=function(){clearInterval(d),i.show(),d=setInterval(B,66)},t.fancybox.hideActivity=function(){i.hide()},t.fancybox.next=function(){return t.fancybox.pos(v+1)},t.fancybox.prev=function(){return t.fancybox.pos(v-1)},t.fancybox.pos=function(t){k||(t=parseInt(t),m=b,t>-1&&t<b.length?(f=t,N()):y.cyclic&&b.length>1&&(f=t>=b.length?0:b.length-1,N()))},t.fancybox.cancel=function(){k||(k=!0,t(".fancybox-inline-tmp").trigger("fancybox-cancel"),O(),g.onCancel(m,f,g),k=!1)},t.fancybox.close=function(){function e(){n.fadeOut("fast"),h.empty().hide(),s.hide(),t(".fancybox-inline-tmp").trigger("fancybox-cleanup"),r.empty(),y.onClosed(b,v,y),b=g=[],v=f=0,y=g={},k=!1}if(!k&&!s.is(":hidden")){if(k=!0,y&&!1===y.onCleanup(b,v,y))return void(k=!1);if(O(),t(a.add(c).add(l)).hide(),t(r.add(n)).unbind(),t(window).unbind("resize.fb scroll.fb"),t(document).unbind("keydown.fb"),"iframe"===y.type&&r.find("iframe").attr("src",H&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==y.titlePosition&&h.empty(),s.stop(),"elastic"==y.transitionOut){u=Y();var i=s.position();p={top:i.top,left:i.left,width:s.width(),height:s.height()},y.opacity&&(p.opacity=1),h.empty().hide(),A.prop=1,t(A).animate({prop:0},{duration:y.speedOut,easing:y.easingOut,step:Q,complete:e})}else s.fadeOut("none"==y.transitionOut?0:y.speedOut,e)}},t.fancybox.resize=function(){n.is(":visible")&&n.css("height",t(document).height()),t.fancybox.center(!0)},t.fancybox.center=function(){var t,e;k||(e=arguments[0]===!0?1:0,t=q(),(e||!(s.width()>t[0]||s.height()>t[1]))&&s.stop().animate({top:parseInt(Math.max(t[3]-20,t[3]+.5*(t[1]-r.height()-40)-y.padding)),left:parseInt(Math.max(t[2]-20,t[2]+.5*(t[0]-r.width()-40)-y.padding))},"number"==typeof arguments[0]?arguments[0]:200))},t.fancybox.init=function(){t("#fancybox-wrap").length||(t("body").append(e=t('<div id="fancybox-tmp"></div>'),i=t('<div id="fancybox-loading"><div></div></div>'),n=t('<div id="fancybox-overlay"></div>'),s=t('<div id="fancybox-wrap"></div>')),o=t('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(s),o.append(r=t('<div id="fancybox-content"></div>'),a=t('<a id="fancybox-close"></a>'),h=t('<div id="fancybox-title"></div>'),c=t('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),l=t('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),a.click(t.fancybox.close),i.click(t.fancybox.cancel),c.click(function(e){e.preventDefault(),t.fancybox.prev()}),l.click(function(e){e.preventDefault(),t.fancybox.next()}),t.fn.mousewheel&&s.bind("mousewheel.fb",function(e,i){k?e.preventDefault():(0==t(e.target).get(0).clientHeight||t(e.target).get(0).scrollHeight===t(e.target).get(0).clientHeight)&&(e.preventDefault(),t.fancybox[i>0?"prev":"next"]())}),t.support.opacity===!1&&s.addClass("fancybox-ie"),H&&(i.addClass("fancybox-ie6"),s.addClass("fancybox-ie6"),t('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(o)))},t.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}},t(document).ready(function(){t.fancybox.init()})}(jQuery);